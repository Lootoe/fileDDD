## é¡¹ç›®åˆå§‹åŒ–

### åˆ›å»ºé¡¹ç›®

> åˆ›å»ºviteé¡¹ç›®ï¼š[å¼€å§‹ | Vite å®˜æ–¹ä¸­æ–‡æ–‡æ¡£ (vitejs.dev)](https://cn.vitejs.dev/guide/#scaffolding-your-first-vite-project)
>
> å¯ç”¨çš„é¡¹ç›®æ¨¡æ¿ï¼š[vite/packages/create-vite at main Â· vitejs/vite Â· GitHub](https://github.com/vitejs/vite/tree/main/packages/create-vite)

é‡‡ç”¨ `node` ç‰ˆæœ¬ `16.16.0`

æˆ‘ä»¬åˆ›å»º`vue-ts`é¡¹ç›®

```
npm create vite@latest my-vue-app --template vue-ts
```

åˆ›å»ºå¥½ä¹‹åï¼Œåˆ é™¤æ‰€æœ‰ç¤ºä¾‹ä»£ç ä¸æ–‡ä»¶

å¹¶æŒ‰å¦‚ä¸‹æ–¹å¼ï¼Œåœ¨ `src` ç›®å½•ä¸‹åˆ›å»ºæ–‡ä»¶å¤¹ï¼š

| åç§°       | ä½œç”¨               |
| ---------- | ------------------ |
| assets     | å­˜æ”¾å›¾ç‰‡ç­‰èµ„æºæ–‡ä»¶ |
| components | å­˜æ”¾å…¨å±€ç»„ä»¶       |
| enums      | å­˜æ”¾æšä¸¾           |
| hooks      | å­˜æ”¾hooks          |
| models     | å­˜æ”¾å„ç§å®šä¹‰çš„ç±»å‹ |
| router     | vue-router æ ¹ç›®å½•  |
| store      | pinia æ ¹ç›®å½•       |
| styles     | å­˜æ”¾å…¨å±€æ ·å¼æ–‡ä»¶   |
| utils      | å­˜æ”¾å¸¸ç”¨å·¥å…·       |
| views      | å­˜æ”¾é¡µé¢           |

### è¡¥å……vueç±»å‹å£°æ˜

åœ¨ `src` ç›®å½•ä¸‹åˆ›å»º `shims-vue.d.ts`ï¼Œå†…å®¹å¦‚ä¸‹ï¼š

```ts
// è¡¥å……vueæ¨¡å—çš„ç±»å‹å£°æ˜
declare module '*.vue' {
  import { DefineComponent } from 'vue'
  const component: DefineComponent<{}, {}, any>
  export default component
}
```

### è¡¥å……viteç±»å‹å£°æ˜

åœ¨`tsconfig`ä¸­æ·»åŠ å¦‚ä¸‹å†…å®¹

```
{
  "compilerOptions": {
    // ...
    "types": ["vite/client"]
  }
}
```

### è¡¥å……nodeç±»å‹å£°æ˜

æˆ‘ä»¬ç”¨ `Nodejs` çš„æ¨¡å—ï¼Œä¼šå¯¼è‡´ `typescript` ç¼–è¯‘æŠ¥é”™ï¼Œå› ä¸ºç¼ºå°‘ç±»å‹å£°æ˜

æ‰€ä»¥å°±éœ€è¦å®‰è£… `@types/node`

> npmåœ°å€ï¼š[@types/node - npm (npmjs.com)](https://www.npmjs.com/package/@types/node/v/12.20.30)

```
npm install --save @types/node
```

åœ¨ `tsconfig.node.json` çš„ `compilerOptions` ä¸­æ·»åŠ ä»¥ä¸‹å­—æ®µ

```json
{
	"compilerOptions": {
  	"types": [
    	"node"
  	]
	},
}
```

### é…ç½®è·¯å¾„åˆ«å

`tsconfig`é…ç½®æ–‡ä»¶é…ç½®å¦‚ä¸‹ï¼š

```ts
import { fileURLToPath, URL } from 'url'
import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'
export default defineConfig({
  resolve: {
    alias: {
      '@': fileURLToPath(new URL('./src', import.meta.url)),
    }
  },
})

```

æœ€é‡è¦çš„ä¸€æ­¥æ˜¯åœ¨`tsconfig`ä¸­ä¹Ÿéœ€è¦é…ç½®ï¼Œåœ¨`complierOptions`ä¸­æ·»åŠ å¦‚ä¸‹é…ç½®

```json
{
    "baseUrl": "./",
    "paths": {
      "@/*": [
        "./src/*"
      ],
    },
}
```





## auto-import

### ä»‹ç»

>å®˜æ–¹æ–‡æ¡£ï¼š[GitHub - antfu/unplugin-auto-import: Auto import APIs on-demand for Vite, Webpack and Rollup](https://github.com/antfu/unplugin-auto-import)

`unplugin-auto-import `æ’ä»¶ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­ï¼Œ**è‡ªåŠ¨å¯¼å…¥å¸¸ç”¨çš„ä½¿ç”¨çš„ç¬¬ä¸‰æ–¹åº“çš„ API**ï¼Œå°±å¯ä»¥æ–¹ä¾¿æˆ‘ä»¬å¼€å‘ï¼Œæå‡å¼€å‘æ•ˆç‡

ä»¥ `Vue` ä¸ºä¾‹ï¼Œåœ¨æ²¡æœ‰ä½¿ç”¨è‡ªåŠ¨å¯¼å…¥å‰ï¼Œéœ€è¦æ‰‹å†™ä»¥ä¸‹çš„ `import` è¯­å¥ï¼š

```js
import { computed, ref } from 'vue'
const count = ref(0)
const doubled = computed(() => count.value * 2)
```

ä½¿ç”¨ `unplugin-auto-import `æ’ä»¶åï¼š

```
const count = ref(0)
const doubled = computed(() => count.value * 2)
```

### ä½¿ç”¨

æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…ï¼š

```
npm i -D unplugin-auto-import
```

ç„¶ååœ¨ `vite.config.ts` ä¸­é…ç½®ï¼š

```ts
import { fileURLToPath, URL } from 'url'
import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'
import AutoImport from 'unplugin-auto-import/vite'
export default defineConfig({
  plugins: [
    vue(),
    AutoImport({
      dts: './auto-imports.d.ts',
      imports: [
        'vue',
        'vue-router',
        'pinia'
      ]
    }),
  ],
})
```

`.dts: true`ï¼šè¿™ä¸ªé…ç½®æ˜¯åœ¨æ ¹ç›®å½•ä¸‹è‡ªåŠ¨ç”Ÿæˆç±»å‹å£°æ˜æ–‡ä»¶`auto-imports.d.ts`

æ–‡ä»¶å¤§ä½“é•¿ä¸‹é¢è¿™æ ·ï¼š

```ts
export {}
declare global {
  const h: typeof import('vue')['h']
  const reactive: typeof import('vue')['reactive']
  const ref: typeof import('vue')['ref']
  const watch: typeof import('vue')['watch']
  const watchEffect: typeof import('vue')['watchEffect']
  // çœç•¥å…¶ä»–å†…å®¹
}
```

ä½†æ˜¯è¿™æ ·è¿˜ä¸å¤Ÿï¼Œéœ€è¦åœ¨`tsconfig`çš„`include`ä¸­æ·»åŠ è¯¥è·¯å¾„ï¼Œä»¥è®©TSç¼–è¯‘

```json
{
	"include": [
  	"./*.d.ts"
	]
}
```





## vue-components

### ä»‹ç»

> å®˜æ–¹æ–‡æ¡£ï¼š[GitHub - antfu/unplugin-vue-components: ğŸ“² On-demand components auto importing for Vue](https://github.com/antfu/unplugin-vue-components#installation)

`unplugin-vue-components` å¯ä»¥ä¸éœ€è¦æ‰‹åŠ¨å¼•å…¥ç»„ä»¶ï¼Œèƒ½å¤Ÿè®©å¼€å‘è€…å°±åƒå…¨å±€ç»„ä»¶é‚£æ ·è¿›è¡Œå¼€å‘ï¼Œä½†å®é™…ä¸Šåˆæ˜¯æŒ‰éœ€å¼•å…¥

ä¾‹å¦‚æˆ‘ä»¬åœ¨`components`ç›®å½•ä¸‹åˆ›å»º`test`ç»„ä»¶ï¼Œæˆ‘ä»¬åœ¨å…¨å±€å°±å¯ä»¥ä¸éœ€è¦å¼•å…¥å³å¯ä½¿ç”¨

ä¾‹å¦‚æˆ‘ä»¬ä½¿ç”¨ç¬¬ä¸‰æ–¹ç»„ä»¶åº“`Antd`ï¼Œæˆ‘ä»¬åªéœ€è¦ç®€å•é…ç½®ä¸€ä¸‹ï¼Œå°±å¯ä»¥å®ç°è‡ªåŠ¨æŒ‰éœ€å¼•å…¥ä½¿ç”¨äº†

ä»¥ `Antd Vue` å’Œ `vite` ä¸ºä¾‹ï¼š

```js
import AutoImport from 'unplugin-auto-import/vite';
import Components from 'unplugin-vue-components/vite';
import { AntDesignVueResolver } from 'unplugin-vue-components/resolvers'

export default {
  plugins: [
    Components({
      resolvers: [
        AntDesignVueResolver()
      ],
    }),
  ],
};
```

è¿™æ ·å°±èƒ½è‡ªåŠ¨å¼•å…¥ `Antd Vue` çš„ç»„ä»¶ï¼Œä¸éœ€è¦æ‰‹åŠ¨å¼•å…¥

```html
<template>
  <a-button>æŒ‰é’®</a-button>
</template>
```

### ä½¿ç”¨

æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…ï¼š

```
npm i unplugin-vue-components -D
```

ç„¶ååœ¨ `vite.config.ts` ä¸­é…ç½®ï¼š

```ts
import { fileURLToPath, URL } from 'url'
import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'
import Components from 'unplugin-vue-components/vite'
export default defineConfig({
  plugins: [
    vue(),
    Components({
      dts: true,
    })
  ],
})
```

`.dts: true`ï¼šè¿™ä¸ªé…ç½®æ˜¯åœ¨æ ¹ç›®å½•ä¸‹è‡ªåŠ¨ç”Ÿæˆç±»å‹å£°æ˜æ–‡ä»¶`components.d.ts`

æ–‡ä»¶å¤§ä½“é•¿ä¸‹é¢è¿™æ ·ï¼š

```ts
export {}

declare module 'vue' {
  export interface GlobalComponents {
    MyTitle: typeof import('./src/components/myTitle.vue')['default']
    RouterLink: typeof import('vue-router')['RouterLink']
    RouterView: typeof import('vue-router')['RouterView']
  }
}
```

ä½†æ˜¯è¿™æ ·è¿˜ä¸å¤Ÿï¼Œéœ€è¦åœ¨`tsconfig`çš„`include`ä¸­æ·»åŠ è¯¥è·¯å¾„ï¼Œä»¥è®©TSç¼–è¯‘

```json
{
	"include": [
  	"./*.d.ts"
	]
}
```





## style-import

### ä»‹ç»

> å®˜æ–¹æ–‡æ¡£ï¼š[GitHub - vbenjs/vite-plugin-style-import: A plug-in that imports component library styles on demand.it is fast](https://github.com/vbenjs/vite-plugin-style-import)

`unplugin-vue-components` è¿™ä¸ªæ’ä»¶ç›®å‰å¹¶ä¸èƒ½æ‰«æä¸åœ¨ `template` å†…ä½¿ç”¨çš„éƒ¨åˆ†ç»„ä»¶ï¼Œæ¯”å¦‚ `Ant-Design-Vue` çš„ `Message` ç»„ä»¶

`Message`ç»„ä»¶ä½¿ç”¨æ—¶æ˜¯æ²¡æœ‰ `css æ ·å¼` çš„ï¼Œæˆ‘ä»¬å¾—æ‰‹åŠ¨å»å¼•å…¥ å®ƒçš„`css`æ ·å¼

ä½†æ˜¯è¿™ç§è¡Œä¸ºæ˜¯å¾ˆéº»çƒ¦çš„ï¼Œä¸ºäº†è§£å†³è¿™ç§éœ€æ±‚

`vite-plugin-style-import`æ’ä»¶ä¹Ÿå°±éšä¹‹è€Œç”Ÿï¼Œå®ƒèƒ½è‡ªåŠ¨å¼•å…¥ ç¬¬ä¸‰æ–¹ç»„ä»¶åº“æˆ‘ä»¬æ‰€ä½¿ç”¨åˆ°çš„ style æ ·å¼

### ä½¿ç”¨

> å¦‚æœé¡¹ç›®é‡Œæ²¡æœ‰ä½¿ç”¨åˆ°è¿™æ–¹é¢çš„ç»„ä»¶ï¼Œå¯ä»¥ä¸é…ç½®

æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…ï¼š

```
npm i vite-plugin-style-import -D
```

åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®ï¼š

```ts
// vite.config.ts
import styleImport, { AndDesignVueResolve } from 'vite-plugin-style-import';

export default {
  plugins: [
    // ...
    styleImport({
      resolves: [AndDesignVueResolve()],
    }),
  ],
}
```





## ä¾èµ–åº“

### sass

>å®˜æ–¹è¯´æ˜ï¼š[åŠŸèƒ½ | Vite å®˜æ–¹ä¸­æ–‡æ–‡æ¡£ (vitejs.dev)](https://cn.vitejs.dev/guide/features.html#css-pre-processors)

`vite` æœ¬èº«è‡ªå¸¦å¯¹`sassã€less`çš„æ”¯æŒï¼Œä½†æ˜¯ä¾èµ–çš„åº“è¿˜æ˜¯è¦è‡ªå·±è£…çš„

```
npm add -D sass
```

è£…å®Œä¹‹åï¼Œå¯ä»¥é…ç½®ä¸€ä¸‹å…¨å±€çš„æ ·å¼æ–‡ä»¶

åœ¨ `styles` ç›®å½•ä¸‹ï¼Œåˆ›å»º `index.scss` æ–‡ä»¶ï¼Œç„¶ååœ¨ `main.js` ä¸­å¼•å…¥

### pinia

> å®˜æ–¹æ–‡æ¡£ï¼š[Home | Pinia ä¸­æ–‡æ–‡æ¡£ (web3doc.top)](https://pinia.web3doc.top/)

æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…ï¼š

```
npm install pinia
```

ç„¶ååœ¨`store`ç›®å½•ä¸‹åˆ›å»º`index.ts`

æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š

```ts
import { createPinia } from "pinia";
const store = createPinia();
export default store;
```

æœ€ååœ¨`main.ts`ä¸­å¼•å…¥

```ts
import { createApp } from 'vue'
import App from './App.vue'
import store from './store'

const app = createApp(App)
app
    .use(store)
    .mount('#app')
```

### VueRouter

> å®˜æ–¹æ–‡æ¡£ï¼š[å®‰è£… | Vue Router (vuejs.org)](https://router.vuejs.org/zh/installation.html)

æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…ï¼š

```
npm install vue-router@4
```

åœ¨`router`ç›®å½•ä¸‹åˆ›å»º`index.ts`

æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š

```ts
import { createRouter, createWebHashHistory, RouteRecordRaw } from "vue-router";

const routes: RouteRecordRaw[] = []

export default createRouter({
    history: createWebHashHistory(),
    routes: routes
})
```

æœ€ååœ¨`Main.ts`ä¸­å¼•å…¥

```ts
import { createApp } from 'vue'
import App from './App.vue'
import router from './router'
import store from './store'

const app = createApp(App)

app
    .use(router)
    .use(store)
    .mount('#app')
```

### å…¨å±€æ ·å¼æ–‡ä»¶

åœ¨`styles`ç›®å½•ä¸‹åˆ›å»º`index.scss`æ–‡ä»¶ï¼Œéšä¾¿å†™ç‚¹æ ·å¼

æœ€ååœ¨`main.ts`ä¸­å¼•å…¥å³å¯ç”Ÿæ•ˆ

```ts
import { createApp } from 'vue'
import App from './App.vue'
import router from './router'
import store from './store'

import "@/styles/index.scss"

const app = createApp(App)

app
    .use(router)
    .use(store)
    .mount('#app')
```

### NaveUI

>[Naive UI: ä¸€ä¸ª Vue 3 ç»„ä»¶åº“](https://www.naiveui.com/zh-CN/dark)

æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…ï¼š

```
npm i -D naive-ui
```

é…ç½®æ–‡ä»¶ä¿®æ”¹ï¼Œéœ€è¦å¯¼å…¥resolversï¼š

```ts
import { fileURLToPath, URL } from 'url'
import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'
import AutoImport from 'unplugin-auto-import/vite'
import Components from 'unplugin-vue-components/vite'
import { NaiveUiResolver } from 'unplugin-vue-components/resolvers'
export default defineConfig({
  plugins: [
    vue(),
    AutoImport({
      dts: true,
      imports: [
        'vue',
        'vue-router',
        'pinia'
      ],
      resolvers: [NaiveUiResolver()]
    }),
    Components({
      dts: true,
      resolvers: [NaiveUiResolver()]
    })
  ],
  resolve: {
    alias: {
      '@': fileURLToPath(new URL('./src', import.meta.url)),
    }
  },
})
```

`tsconfig`ä¸­æ·»åŠ ç±»å‹æ”¯æŒï¼š

```json
{
  "compilerOptions": {
    // ...
    "types": ["naive-ui/volar"]
  }
}
```

### VueUse

>[VueUse | VueUse](https://vueuse.org/)

æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…ï¼š

```
npm i @vueuse/core
```

å†é…ç½®`autoImport`ï¼š

```ts
// ...
export default defineConfig({
  plugins: [
    vue(),
    AutoImport({
      dts: true,
      imports: [
        'vue',
        'vue-router',
        'pinia',
        '@vueuse/core'
      ],
      resolvers: [NaiveUiResolver()]
    }),
    Components({
      dts: true,
      deep: true,
      resolvers: [NaiveUiResolver()]
    })
  ],
})
```





## ESlint + Prettier

### å®‰è£…

`Eslint` + `Prettier`ï¼š`Eslint`è´Ÿè´£æ ¡éªŒä»£ç è§„èŒƒï¼Œ`Prettier`è´Ÿè´£ä¿®å¤ä»£ç æ ¼å¼

`ESLint-Plugin-Prettier`ï¼šä»¥`ESLint`è§„åˆ™è®¾ç½®`Prettier`ï¼Œè¿™æ ·åœ¨æ‰§è¡Œ`npx eslint --fix`ä¼šä»¥`Prettier`æ ¼å¼åŒ–ä»£ç è€Œä¸æ˜¯`ESLint`

`eslint-config-prettier`ï¼šå…³é—­äº†æ‰€æœ‰å¯èƒ½ä¸`Prettier`å†²çªçš„`ESLint`è§„åˆ™

`eslint-plugin-vue`ï¼š`vue`çš„å®˜æ–¹`eslint`æ’ä»¶ï¼Œä½¿`eslint`èƒ½è¯†åˆ«`vue`å•æ–‡ä»¶ç»„ä»¶ä»¥åŠ`vue`è¯­æ³•

`eslint-config-prettier`ï¼šä½¿`prettier`èƒ½æŒ‰`vue`çš„è§„èŒƒæ ¼å¼åŒ–ä»£ç 

`@typescript-eslint/parser`ï¼šESLintçš„è§£æå™¨ï¼Œç”¨äºè§£ætypescriptï¼Œä»è€Œæ£€æŸ¥å’Œè§„èŒƒTypescriptä»£ç 

`@typescript-eslint/eslint-plugin`ï¼šè¿™æ˜¯ä¸€ä¸ªESLintæ’ä»¶ï¼ŒåŒ…å«äº†å„ç±»å®šä¹‰å¥½çš„æ£€æµ‹Typescriptä»£ç çš„è§„èŒƒ

æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```shell
npm i eslint prettier eslint-plugin-prettier eslint-config-prettier -D
npm install eslint eslint-plugin-vue -D
npm add --dev @vue/eslint-config-prettier @rushstack/eslint-patch
npm i @typescript-eslint/parser
```

### ç¼–è¾‘é…ç½®æ–‡ä»¶

ç”±äº`vite` é‡‡ç”¨ `ESModule` ï¼Œæ‰€ä»¥`eslint`é…ç½®æ–‡ä»¶ä¸èƒ½æ˜¯`js`æ–‡ä»¶ï¼Œå¿…é¡»æ˜¯`cjs`

é…ç½®å¦‚ä¸‹ï¼š

```js
module.exports = {
  env: {
    browser: true,
    node: true,
    es2021: true,
  },
  extends: ['eslint:recommended', 'plugin:prettier/recommended', 'plugin:vue/vue3-essential'],
  plugins: ['prettier'],
  parserOptions: {
    ecmaVersion: 'latest',
    sourceType: 'module',
  },
  rules: {
    'prettier/prettier': [
      'error',
      {
        //  æ¯è¡Œæœ€å¤§å®½åº¦
        printWidth: 120,
        // ç¼©è¿›é•¿åº¦
        tabWidth: 2,
        // ç”¨åˆ¶è¡¨ç¬¦è€Œä¸æ˜¯ç©ºæ ¼ç¼©è¿›è¡Œã€‚
        useTabs: false,
        // å•å¼•å·
        singleQuote: true,
        // ç»“å°¾æ— åˆ†å·
        semi: false,
        // è¡Œé¦–é€—å·
        trailingComma: 'es5',
        // å°†å¤šè¡ŒHTMLï¼ˆHTMLã€JSXã€Vueã€Angularï¼‰å…ƒç´ çš„>æ”¾åœ¨æœ€åä¸€è¡Œçš„æœ«å°¾ï¼Œè€Œä¸æ˜¯å•ç‹¬æ”¾åœ¨ä¸‹ä¸€è¡Œ
        bracketSpacing: true,
        // åœ¨å”¯ä¸€çš„ç®­å¤´å‡½æ•°å‚æ•°å‘¨å›´åŒ…å«æ‹¬å·
        arrowParens: 'avoid',
        endOfLine: 'auto',
      },
    ],
    'no-unused-vars': 'warn',
    'vue/multi-word-component-names': 'off',
    'vue/no-unused-components': 'off',
  },
}
```

[åœ¨Typescripté¡¹ç›®ä¸­ï¼Œå¦‚ä½•ä¼˜é›…çš„ä½¿ç”¨ESLintå’ŒPrettier_typescript-eslint_è¿‡å®¢çŒ«2022çš„åšå®¢-CSDNåšå®¢](https://blog.csdn.net/zdhsoft/article/details/119869945)
